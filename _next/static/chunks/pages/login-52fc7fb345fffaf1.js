(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return __webpack_require__(9694)}])},9694:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(196),next_config__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1752),next_config__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(next_config__WEBPACK_IMPORTED_MODULE_2__),next_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1163),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7294),components_context__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3649);let Login=()=>{let form=(0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null),[errorMessage,setErrorMessage]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(""),{publicRuntimeConfig}=next_config__WEBPACK_IMPORTED_MODULE_2___default()(),{setLoading}=(0,react__WEBPACK_IMPORTED_MODULE_4__.useContext)(components_context__WEBPACK_IMPORTED_MODULE_5__.Il),{isLogged,logIn}=(0,react__WEBPACK_IMPORTED_MODULE_4__.useContext)(components_context__WEBPACK_IMPORTED_MODULE_5__.B3),router=(0,next_router__WEBPACK_IMPORTED_MODULE_3__.useRouter)();(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{setLoading(!0),isLogged&&router.push("/admin"),setLoading(!1)},[isLogged,router,setLoading]);let handleSubmit=async e=>{var ref,ref1,ref2,ref3;e.preventDefault(),setErrorMessage("");let password=null==form?void 0:null===(ref=form.current)||void 0===ref?void 0:ref.password.value,email=null==form?void 0:null===(ref1=form.current)||void 0===ref1?void 0:ref1.email.value;if(""===email){setErrorMessage("Email cannot be empty ");return}if(""===password){setErrorMessage("Password cannot be empty ");return}setLoading(!0);try{let resp=await axios__WEBPACK_IMPORTED_MODULE_1__.ZP.post("".concat(publicRuntimeConfig.apiURL,"/users/auth"),{email,password});200===resp.status&&(logIn(null===(ref2=resp.data)||void 0===ref2?void 0:ref2.jwt),router.push("/admin"))}catch(error){axios__WEBPACK_IMPORTED_MODULE_1__.ZP.isAxiosError(error)&&(null===(ref3=error.response)||void 0===ref3?void 0:ref3.status)===401&&setErrorMessage("Invalid credentials")}setLoading(!1)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{ref:form,onSubmit:handleSubmit,className:"flex flex-col gap-6 px-10 text-center border rounded-lg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"text-6xl",children:"LOGIN"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-red-600",children:errorMessage}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{name:"email",type:"email",placeholder:"email",className:"text-lg text-center text-black"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{name:"password",type:"password",placeholder:"password",className:"text-lg text-center text-black"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"mb-10 border",children:"Login"})]})})};__webpack_exports__.default=Login}},function(__webpack_require__){__webpack_require__.O(0,[774,888,179],function(){return __webpack_require__(__webpack_require__.s=3236)}),_N_E=__webpack_require__.O()}]);