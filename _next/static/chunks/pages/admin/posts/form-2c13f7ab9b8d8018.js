(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{3498:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/posts/form",function(){return __webpack_require__(616)}])},6965:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{jT:function(){return errorModal},e$:function(){return getErrorMessage},Sb:function(){return successModal},Of:function(){return validateFields},IG:function(){return yesNoModal}});let getErrorMessage=error=>{var ref,ref1,ref2;return(null===(ref=error.response)||void 0===ref?void 0:ref.status)===400&&(null===(ref2=error.response)||void 0===ref2||ref2.data.message[0].error),null===(ref1=error.response)||void 0===ref1?void 0:ref1.data.message};var sweetalert2_all=__webpack_require__(6455),sweetalert2_all_default=__webpack_require__.n(sweetalert2_all);let errorModal=text=>{text=Array.isArray(text)?text[0].error:text,sweetalert2_all_default().fire({title:"Error!",text:text.charAt(0).toUpperCase()+text.slice(1),icon:"error",confirmButtonText:"Ok",customClass:{popup:"modal-popup",confirmButton:"modal-confirm-button"}})},successModal=text=>{sweetalert2_all_default().fire({title:"Success!",text:text.charAt(0).toUpperCase()+text.slice(1),icon:"success",confirmButtonText:"Ok",customClass:{popup:"modal-popup",confirmButton:"modal-confirm-button"}})},yesNoModal=async text=>{let result=sweetalert2_all_default().fire({title:text,showCancelButton:!0,confirmButtonText:"Yes",customClass:{popup:"modal-popup",confirmButton:"modal-confirm-button",cancelButton:"modal-cancel-button"}});return result},validateFields=fields=>{for(let field of fields)if(void 0===field.value||0===field.value.length)return field;return null}},616:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3433),axios__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(196),helpers__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6965),hooks__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7186),next_router__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1163),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7294);let New=()=>{(0,hooks__WEBPACK_IMPORTED_MODULE_4__.DH)();let router=(0,next_router__WEBPACK_IMPORTED_MODULE_5__.useRouter)(),{id,defaultTitle,slug}=router.query,postAPI=(0,hooks__WEBPACK_IMPORTED_MODULE_4__.ij)(new api__WEBPACK_IMPORTED_MODULE_1__.wp("".concat("https://portfolio-api-3fr6.onrender.com","/posts"))),[errorMessage,setErrorMessage]=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(""),form=(0,react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null),handleCreate=async e=>{var ref,ref1;e.preventDefault(),setErrorMessage("");let defaultTitle=null==form?void 0:null===(ref=form.current)||void 0===ref?void 0:ref.defaultTitle.value,slug=null==form?void 0:null===(ref1=form.current)||void 0===ref1?void 0:ref1.slug.value,field=(0,helpers__WEBPACK_IMPORTED_MODULE_3__.Of)([{name:"Default Title",value:defaultTitle},{name:"Slug",value:slug}]);if(null!==field){setErrorMessage("".concat(field.name," cannot be empty"));return}let resp=await postAPI.create({defaultTitle,slug});if(!axios__WEBPACK_IMPORTED_MODULE_2__.ZP.isAxiosError(resp)&&null!==resp){(0,helpers__WEBPACK_IMPORTED_MODULE_3__.Sb)("".concat(resp.defaultTitle," was created succesfully!")),router.push("/admin/posts");return}(0,helpers__WEBPACK_IMPORTED_MODULE_3__.jT)((0,helpers__WEBPACK_IMPORTED_MODULE_3__.e$)(resp))},handleUpdate=async e=>{var ref,ref1;e.preventDefault(),setErrorMessage("");let defaultTitle=null==form?void 0:null===(ref=form.current)||void 0===ref?void 0:ref.defaultTitle.value,slug=null==form?void 0:null===(ref1=form.current)||void 0===ref1?void 0:ref1.slug.value,field=(0,helpers__WEBPACK_IMPORTED_MODULE_3__.Of)([{name:"Default Title",value:defaultTitle},{name:"Slug",value:slug}]);if(null!==field){setErrorMessage("".concat(field.name," cannot be empty"));return}let resp=await postAPI.update({id:id,defaultTitle,slug});if(!axios__WEBPACK_IMPORTED_MODULE_2__.ZP.isAxiosError(resp)&&null!==resp){(0,helpers__WEBPACK_IMPORTED_MODULE_3__.Sb)("".concat(resp.defaultTitle," was updated succesfully!")),router.push("/admin/posts");return}(0,helpers__WEBPACK_IMPORTED_MODULE_3__.jT)((0,helpers__WEBPACK_IMPORTED_MODULE_3__.e$)(resp))};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex justify-center",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{ref:form,onSubmit:id?handleUpdate:handleCreate,className:"flex flex-col gap-3 px-5 py-4 border rounded-lg border-txt-light dark:border-txt-dark",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{className:"text-4xl text-center",children:id?"Update":"Create"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-red-600",children:errorMessage}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"text",placeholder:"Default Title",className:"text-xl text-center text-txt-light dark:text-txt-dark",name:"defaultTitle",defaultValue:defaultTitle}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"text",placeholder:"Slug",className:"text-xl text-center text-txt-light dark:text-txt-dark",name:"slug",defaultValue:slug}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"submit",className:"p-1 mb-2 text-2xl border rounded-lg border-txt-light dark:border-txt-dark hover:border-txt-light dark:hover:border-txt-dark hover:scale-105",children:id?"Update":"Create"})]})})};__webpack_exports__.default=New}},function(__webpack_require__){__webpack_require__.O(0,[455,774,888,179],function(){return __webpack_require__(__webpack_require__.s=3498)}),_N_E=__webpack_require__.O()}]);