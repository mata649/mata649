(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{7047:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/posts",function(){return __webpack_require__(3665)}])},8075:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{HS:function(){return AddButton},Xg:function(){return AdminCard},xE:function(){return BackButton},iA:function(){return Table}});var jsx_runtime=__webpack_require__(5893),next_link=__webpack_require__(1664),link_default=__webpack_require__.n(next_link);__webpack_require__(7294);let AdminCard=param=>{let{name,route}=param;return(0,jsx_runtime.jsx)(link_default(),{href:"/admin/".concat(route),className:"flex items-center justify-center py-6 text-center border rounded-lg hover:border-yellow-400 hover:scale-105",children:(0,jsx_runtime.jsx)("h1",{className:"text-4xl md:text-5xl",children:name})})},BackButton=()=>(0,jsx_runtime.jsx)(link_default(),{href:"/admin",className:"p-1 mb-2 text-xl rounded-lg hover:text-yellow-400 hover:scale-105",children:"Back"}),AddButton=param=>{let{href}=param;return(0,jsx_runtime.jsx)(link_default(),{href:"/admin/".concat(href),className:"p-1 mb-2 text-xl hover:text-yellow-400 hover:scale-105",children:"Add"})},Table=param=>{let{children,labels}=param;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)("table",{className:"border border-collapse ",children:[(0,jsx_runtime.jsx)("thead",{children:(0,jsx_runtime.jsx)("tr",{children:labels.map(label=>(0,jsx_runtime.jsx)("th",{children:label},label))})}),(0,jsx_runtime.jsx)("tbody",{children:children})]})})}},6965:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{jT:function(){return errorModal},e$:function(){return getErrorMessage},Sb:function(){return successModal},Of:function(){return validateFields},IG:function(){return yesNoModal}});let getErrorMessage=error=>{var ref,ref1,ref2;return(null===(ref=error.response)||void 0===ref?void 0:ref.status)===400&&(null===(ref2=error.response)||void 0===ref2||ref2.data.message[0].error),null===(ref1=error.response)||void 0===ref1?void 0:ref1.data.message};var sweetalert2_all=__webpack_require__(6455),sweetalert2_all_default=__webpack_require__.n(sweetalert2_all);let errorModal=text=>{sweetalert2_all_default().fire({title:"Error!",text:text.charAt(0).toUpperCase()+text.slice(1),icon:"error",confirmButtonText:"Ok",customClass:{popup:"modal-popup",confirmButton:"modal-confirm-button"}})},successModal=text=>{sweetalert2_all_default().fire({title:"Success!",text:text.charAt(0).toUpperCase()+text.slice(1),icon:"success",confirmButtonText:"Ok",customClass:{popup:"modal-popup",confirmButton:"modal-confirm-button"}})},yesNoModal=async text=>{let result=sweetalert2_all_default().fire({title:text,showCancelButton:!0,confirmButtonText:"Yes",customClass:{popup:"modal-popup",confirmButton:"modal-confirm-button",cancelButton:"modal-cancel-button"}});return result},validateFields=fields=>{for(let field of fields)if(void 0===field.value||0===field.value.length)return field;return null}},3665:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return posts}});var jsx_runtime=__webpack_require__(5893);__webpack_require__(7294);var moment=__webpack_require__(381),moment_default=__webpack_require__.n(moment),next_link=__webpack_require__(1664),link_default=__webpack_require__.n(next_link),next_router=__webpack_require__(1163),index_es=__webpack_require__(9603),free_regular_svg_icons=__webpack_require__(4288);let Row=param=>{let{post,handleDelete}=param,router=(0,next_router.useRouter)(),handleRedirectToForm=()=>{let{id,defaultTitle,publishedDate,slug}=post;router.push({pathname:"/admin/posts/form",query:{id,defaultTitle,publishedDate,slug}})},handleRedirectToPostContent=()=>{let{id}=post;router.push({pathname:"/admin/posts/content",query:{idPost:id}})};return(0,jsx_runtime.jsxs)("tr",{className:"",children:[(0,jsx_runtime.jsx)("td",{className:"text-center border",children:post.defaultTitle}),(0,jsx_runtime.jsxs)("td",{className:"px-4 text-center border ",children:[" ",(0,jsx_runtime.jsx)(link_default(),{href:"/blog/".concat(post.slug),children:post.slug.length>20?post.slug.slice(0,20):post.slug})," "]}),(0,jsx_runtime.jsx)("td",{className:"text-center border",children:moment_default()(post.publishedDate).calendar()}),(0,jsx_runtime.jsxs)("td",{className:"flex items-center justify-center gap-1 px-4 text-center border",children:[(0,jsx_runtime.jsxs)("button",{onClick:handleRedirectToPostContent,children:[(0,jsx_runtime.jsx)(index_es.G,{className:"text-xl text-white hover:text-yellow-400",icon:free_regular_svg_icons.Xgz})," "]}),(0,jsx_runtime.jsxs)("button",{onClick:handleRedirectToForm,children:[(0,jsx_runtime.jsx)(index_es.G,{className:"text-xl text-white hover:text-yellow-400",icon:free_regular_svg_icons.Yai})," "]}),(0,jsx_runtime.jsx)("button",{onClick:()=>handleDelete(post.id,post.defaultTitle),children:(0,jsx_runtime.jsx)(index_es.G,{className:"text-xl text-white hover:text-yellow-400",icon:free_regular_svg_icons.I7k})})]})]})};var hooks=__webpack_require__(7186),general=__webpack_require__(8760),config=__webpack_require__(1752),config_default=__webpack_require__.n(config),api=__webpack_require__(3433),helpers=__webpack_require__(6965),axios=__webpack_require__(196),admin=__webpack_require__(8075);let Skills=()=>{(0,hooks.DH)();let{publicRuntimeConfig}=config_default()(),postAPI=(0,hooks.ij)(new api.wp("".concat(publicRuntimeConfig.apiURL,"/posts"))),{items:posts,setItems:setPosts,pagination,totalPages,setPagination}=(0,hooks.ib)(postAPI,{currentPage:1,limit:10},[{order:"desc",by:"publishedDate"}]),handleDelete=async(id,name)=>{let result=await (0,helpers.IG)("Do you want to delete ".concat(name,"?"));if(result.isConfirmed){let resp=await postAPI.delete(id);if(!axios.ZP.isAxiosError(resp)&&null!==resp){(0,helpers.Sb)("".concat(resp.defaultTitle," was deleted successfully")),setPosts(posts.filter(post=>post.id!==id));return}(0,helpers.jT)("An error occurs while ".concat(name," was being deleted"))}};return(0,jsx_runtime.jsx)("div",{className:"grid grid-cols-5",children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-col col-span-3 col-start-2",children:[(0,jsx_runtime.jsx)(admin.iA,{labels:["Default Title","Slug","Published Date","Actions"],children:posts.map(post=>(0,jsx_runtime.jsx)(Row,{post:post,handleDelete:handleDelete},"row-".concat(post.id)))}),(0,jsx_runtime.jsx)(general.tl,{pagination:pagination,setPagination:setPagination,totalPages:totalPages}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,jsx_runtime.jsx)(admin.xE,{}),(0,jsx_runtime.jsx)(admin.HS,{href:"/posts/form"})]})]})})};var posts=Skills}},function(__webpack_require__){__webpack_require__.O(0,[885,455,774,888,179],function(){return __webpack_require__(__webpack_require__.s=7047)}),_N_E=__webpack_require__.O()}]);